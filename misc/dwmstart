#!/bin/sh

xrandr --dpi 96
xrandr --output DisplayPort-1 --mode 2560x1440 -r 144 --output HDMI-A-0 --mode 2560x1440 -r 75 --left-of DisplayPort-1
setbg
picom --config ~/.config/picom/dwm.conf &
syncthing --no-browser &
/usr/lib/kdeconnectd &

xrdb ~/.config/x11/xresources & xrdbpid=$!

autostart="steam discord mpd spotify-launcher qbittorrent dunst unclutter pipewire"

for program in $autostart; do
    pidof -sx "$program" || "$program" &
done >/dev/null 2>&1

[ -n "$xrdbpid" ] && wait "$xrdbpid"

# Activate dbus variables
dbus-update-activation-environment --all
ssh-agent dwm
pgrep dwm && dwmblocks &
